# -*- coding: utf-8 -*-
"""Agriculture Assistant ChatBot

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1lMxFAgELiQxrLqjofOb51twS-gn6qJUY
"""

!pip install streamlit scikit-learn

import pandas as pd
import numpy as np
import nltk
import streamlit
import transformers

data = pd.read_csv('/content/drive/MyDrive/ChatBot/agriculture_data.csv')
data

def search_answer(query,data):
   for index, row in data.iterrows():
     if query.lower() in row['Question (Bangla)'].lower():
        return row['Answer (Bangla)']
   return "ржжрзБржГржЦрж┐ржд, ржЖржкржирж╛рж░ ржкрзНрж░рж╢рзНржирзЗрж░ ржЙрждрзНрждрж░ ржЦрзБржБржЬрзЗ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯржирж┐ ред"

search_answer('ржзрж╛ржи ржЪрж╛рж╖рзЗрж░ ржЬржирзНржп ржЙржкржпрзБржХрзНржд рж╕рж╛рж░ ржХрзЛржиржЯрж┐?',data)

from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.metrics.pairwise import cosine_similarity

#prepare TF-IDF Vectorizer
vectorizer = TfidfVectorizer()
tfidf_matrix = vectorizer.fit_transform(data['Question (Bangla)'])

def get_best_match(query):
  query_vector = vectorizer.transform([query])
  similarities = cosine_similarity(query_vector, tfidf_matrix)

  best_match_index = similarities.argmax()

  return data.iloc[best_match_index]['Answer (Bangla)']

get_best_match('ржХрзГрж╖ржХржжрзЗрж░ ржЬржирзНржп рж╕рж░рзНржмрж╢рзЗрж╖ рж╕рж░ржХрж╛рж░рж┐ рж╕рзБржмрж┐ржзрж╛ ржХрж┐?')

import streamlit as st

st.title("ЁЯМ╛ ржмрж╛ржВрж▓рж╛ ржХрзГрж╖рж┐ ржкрж░рж╛ржорж░рзНрж╢ ржЪрзНржпрж╛ржЯржмржЯ")
st.subheader("ржЖржкржирж╛рж░ ржХрзГрж╖рж┐ рж╕ржВржХрзНрж░рж╛ржирзНржд ржкрзНрж░рж╢рзНржи рж▓рж┐ржЦрзБржи")

data = data

user_query = st.text_input("ржЖржкржирж╛рж░ ржкрзНрж░рж╢рзНржи рж▓рж┐ржЦрзБржи ( ржмрж╛ржВрж▓рж╛рзЯ)")

if st.button("ржкрж░рж╛ржорж░рзНрж╢ ржирж┐ржи"):
   if user_query:
     answer = get_best_match(user_query)
     st.success(f"ЁЯУв ржкрж░рж╛ржорж░рзНрж╢ : {answer}")
   else:
     st.warning("тЪа ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржПржХржЯрж┐ ржкрзНрж░рж╢рзНржи рж▓рж┐ржЦрзБржиред")


import random

if st.button("ЁЯСитАНЁЯМ╛ ржжрзИржирж┐ржХ ржХрзГрж╖рж┐ ржкрж░рж╛ржорж░рзНрж╢"):
  random_tip = random.choice(data['Answer(Bangla)'])
  st.info(f"тЬЕ {random_tip}")